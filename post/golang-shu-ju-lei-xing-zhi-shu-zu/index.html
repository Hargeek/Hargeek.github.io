<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>Golang数据类型之数组 | 山山仙人博客</title>
<meta name="description" content="">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://cdn.bootcss.com/font-awesome/5.7.2/css/all.css">
<link rel="shortcut icon" href="https://www.ssgeek.com/favicon.ico?v=1700356652234">
<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://www.ssgeek.com/styles/main.css">


  
    <link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/gitalk/1.6.2/gitalk.css" />
  

  


<script src="https://cdn.bootcdn.net/ajax/libs/vue/2.6.11/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script data-ad-client="ca-pub-6775328896166270" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?4b826a92a3dc151a74693fa1942d3167";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

<link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/aos/2.3.4/aos.css" />


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-147397031-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-147397031-1');
</script>


  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://www.ssgeek.com">
        <img src="https://www.ssgeek.com/images/avatar.png?v=1700356652234" class="site-logo">
        <h1 class="site-title">山山仙人博客</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="https://www.ssgeek.com" class="site-nav">
            首页
          </a>
        
      
        
          <a href="https://www.ssgeek.com/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="https://www.ssgeek.com/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="https://www.ssgeek.com/post/about/" class="site-nav">
            关于
          </a>
        
      
        
          <a href="https://www.ssgeek.com/post/gong-zhong-hao/" class="site-nav">
            公众号
          </a>
        
      
        
          <a href="https://www.ssgeek.com/post/you-qing-lian-jie/" class="site-nav">
            友情链接
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
          <a class="social-link" href="https://github.com/hargeek" target="_blank">
            <i class="fab fa-github"></i>
          </a>
        
      
        
          <a class="social-link" href="https://twitter.com/anronghong" target="_blank">
            <i class="fab fa-twitter"></i>
          </a>
        
      
        
          <a class="social-link" href="https://weibo.com/u/5717964658" target="_blank">
            <i class="fab fa-weibo"></i>
          </a>
        
      
        
          <a class="social-link" href="https://www.zhihu.com/people/hong-an-rong-46/activities" target="_blank">
            <i class="fab fa-zhihu"></i>
          </a>
        
      
        
          <a class="social-link" href="https://www.facebook.com/profile.php?id=100041470532098" target="_blank">
            <i class="fab fa-facebook"></i>
          </a>
        
      
    </div>
    <div class="site-description">
      
    </div>
    <div class="site-footer">
      <a href="https://beian.miit.gov.cn" style="text-decoration:none;">鄂ICP备18007156号-1</a></br></br>Copyright © All Rights Reserved | <a class="rss" href="https://www.ssgeek.com/atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>

      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">Golang数据类型之数组</h2>
            <div class="post-date">2021-06-24</div>
            
            <div class="post-content">
              <p><ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-%E5%AD%98%E5%82%A8%E6%96%B9%E5%BC%8F">1、存储方式</a></li>
<li><a href="#2-%E5%A3%B0%E6%98%8E%E4%B8%8E%E5%88%9D%E5%A7%8B%E5%8C%96">2、声明与初始化</a>
<ul>
<li><a href="#21-%E5%A3%B0%E6%98%8E%E8%AF%AD%E6%B3%95">2.1 声明语法</a></li>
<li><a href="#22-%E6%95%B0%E7%BB%84%E7%B1%BB%E5%9E%8B">2.2 数组类型</a></li>
<li><a href="#23-%E6%95%B0%E7%BB%84%E9%BB%98%E8%AE%A4%E5%80%BC">2.3 数组默认值</a></li>
<li><a href="#24-%E5%A3%B0%E6%98%8E%E5%B9%B6%E5%88%9D%E5%A7%8B%E5%8C%96">2.4 声明并初始化</a></li>
</ul>
</li>
<li><a href="#3-%E8%AE%BF%E9%97%AE%E4%B8%8E%E4%BF%AE%E6%94%B9">3、访问与修改</a></li>
<li><a href="#4-%E6%8C%87%E9%92%88%E6%95%B0%E7%BB%84">4、指针数组</a></li>
<li><a href="#5-%E6%95%B0%E7%BB%84%E6%8B%B7%E8%B4%9D">5、数组拷贝</a></li>
<li><a href="#6-%E6%95%B0%E7%BB%84%E9%81%8D%E5%8E%86">6、数组遍历</a></li>
<li><a href="#7-%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84">7、多维数组</a></li>
<li><a href="#8-%E6%95%B0%E7%BB%84%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0">8、数组作为函数参数</a></li>
</ul>
</li>
</ul>
</p>
<figure data-type="image" tabindex="1"><img src="https://image.ssgeek.com/golang.png" alt=""></figure>
<p>有过<code>Python</code>、<code>JavaScript</code>编程经验的人都知道其数组是动态的，可以随需求自动增大数组长度，而<code>Go</code>里面的数组长度却是固定的，无法扩大或者缩小</p>
<p>但<code>Go</code>中也有类似的动态&quot;数组&quot;，称为切片<code>slice</code></p>
<p><code>Go</code>中的数组是<code>slice</code>和<code>map</code>两种数据类型的基础，这两种数据类型的底层都是通过数组实现的</p>
<h2 id="1-存储方式">1、存储方式</h2>
<p>当在<code>Go</code>中声明一个数组之后，会在内存中开辟一段固定长度的、连续的空间存放数组中的各个元素，这些元素的数据类型完全相同，可以是内置的简单数据类型(<code>int</code>、<code>string等)，也可以是自定义的</code>struct`结构体类型</p>
<ul>
<li>固定长度：这意味着数组不可增长、不可缩减。想要扩展数组，只能创建新数组，将原数组的元素复制到新数组</li>
<li>连续空间：这意味可以在缓存中保留的时间更长，搜索速度更快，是一种非常高效的数据结构，同时还意味着可以通过数值<code>index</code>的方式访问数组中的某个元素</li>
<li>数据类型：意味着限制了每个<code>block</code>中可以存放什么样的数据，以及每个<code>block</code>可以存放多少字节的数据</li>
</ul>
<p>例如，使用下面的语句声明一个长度为<code>4</code>的<code>int</code>类型的数组，那么这个数组最多只能存放<code>4</code>个元素，且所有元素都只能是<code>int</code>类型。同时，还为这个数组做了初始化</p>
<pre><code class="language-go">array := [4]int{3, 1, 4,1 }
</code></pre>
<h2 id="2-声明与初始化">2、声明与初始化</h2>
<h3 id="21-声明语法">2.1 声明语法</h3>
<p><code>Go</code>语言数组声明需要指定元素类型及元素个数，语法格式如下</p>
<pre><code class="language-go">var variable_name [SIZE] variable_type
</code></pre>
<p>比如声明一个长度为<code>5</code>, 类型是<code>float64</code>的数组</p>
<pre><code class="language-go">var arrayf [5]float64
</code></pre>
<h3 id="22-数组类型">2.2 数组类型</h3>
<p>虽然称呼数组为<code>int</code>类型的数组，但数组的数据类型是两部分组成的<code>[n]TYPE</code>，这个整体才是数组的数据类型。所以，<code>[4]int</code>和<code>[5]int</code>是两种不同的数组类型</p>
<pre><code class="language-go">var (
    a1 [4]int
    a2 [5]int
)
fmt.Println(reflect.TypeOf(a1))
fmt.Println(reflect.TypeOf(a2))
</code></pre>
<h3 id="23-数组默认值">2.3 数组默认值</h3>
<p>当一个变量被声明之后, 都会立即赋予一个默认值, 数组的默认值和数组的数据类型有关</p>
<pre><code class="language-go">var a1 [5]int
fmt.Println(a1) // [0 0 0 0 0]
var a2 [4]string
fmt.Println(a2) // [   ]
</code></pre>
<h3 id="24-声明并初始化">2.4 声明并初始化</h3>
<p>如果不想填充默认值, 可以声明时就赋值</p>
<pre><code class="language-go">a1 := [3]int{1, 2, 3}
fmt.Println(a1)
// 如果将元素个数指定为特殊符号...，则表示通过初始化时的给定的值个数来推断数组长度
a2 := [...]int{1, 2, 3, 4}
fmt.Println(a2)
a3 := [...]int{1, 1, 1}
fmt.Println(a3)
// 如果声明数组时，只想给其中某几个元素初始化赋值，则使用索引号
a4 := [4]int{0: 1, 3: 5}
fmt.Println(a4)
</code></pre>
<h2 id="3-访问与修改">3、访问与修改</h2>
<p>可以通过数组的索引访问数组的值</p>
<pre><code class="language-go">a := [4]int{0: 1, 2: 5}
fmt.Println(a[0])
fmt.Println(a[2])
</code></pre>
<p>同理可通过数组的索引修改数组的值</p>
<pre><code class="language-go">a[0] = 10
a[3] = 20
fmt.Println(a[0])
fmt.Println(a[3])
</code></pre>
<h2 id="4-指针数组">4、指针数组</h2>
<p>可以声明一个指针类型的数组，这样数组中就可以存放指针。注意，指针的默认初始化值为<code>nil</code></p>
<p>例如，创建<code>int</code>类型指针的数组</p>
<pre><code class="language-go">a := [4]*int{0: new(int), 3: new(int)}
fmt.Println(a)
// [0xc00001c2a8 &lt;nil&gt; &lt;nil&gt; 0xc00001c2b0]

// 如果指针地址为空, 是会报空指针错误的, 比如
// *a[1] = 3
// panic: runtime error: invalid memory address or nil pointer dereference 

*a[0] = 10
*a[3] = 20
fmt.Println(a)
fmt.Println(*a[0], *a[3])

// 为1赋值
a[1] = new(int)
*a[1] = 30
fmt.Println(a, *a[1])
</code></pre>
<h2 id="5-数组拷贝">5、数组拷贝</h2>
<p>在<code>Go</code>中，由于数组算是一个值类型，所以可以将它赋值给其它数组<br>
因为数组类型的完整定义为<code>[n]TYPE</code>，所以数组赋值给其它数组的时候，<code>n</code>和<code>TYPE</code>必须相同</p>
<p><strong>修改a2数组元素的值，不会影响a1数组</strong></p>
<p>例如:</p>
<pre><code class="language-go">a1 := [4]string{&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;m&quot;}
a2 := [4]string{&quot;x&quot;, &quot;y&quot;, &quot;z&quot;, &quot;n&quot;}
a1 = a2
fmt.Println(a1, a2)
</code></pre>
<p>数组赋值给其它数组时，实际上是完整地拷贝一个数组。所以，如果数组是一个指针型的数组，那么拷贝的将是指针数组，而不会拷贝指针所指向的对象</p>
<pre><code class="language-go">a1 := [4]*string{new(string), new(string), new(string), new(string)}
a2 := a1
fmt.Println(a1, a2)

*a1[0] = &quot;A&quot;
*a1[1] = &quot;B&quot;
*a1[2] = &quot;C&quot;
*a1[3] = &quot;D&quot;
fmt.Println(*a1[0], *a2[0])
// A A
</code></pre>
<h2 id="6-数组遍历">6、数组遍历</h2>
<p><code>range</code>关键字可以对<code>array</code>进行迭代，每次返回一个<code>index</code>和对应的元素值。可以将<code>range</code>的迭代结合<code>for</code>循环对<code>array</code>进行遍历</p>
<pre><code class="language-go">a := [4]int{1, 2, 3, 4}
for i, v := range a {
    fmt.Println(i, v)
}
/*
0 1
1 2
2 3
3 4
*/
</code></pre>
<h2 id="7-多维数组">7、多维数组</h2>
<p>可以通过组合两个一维数组的方式构成二维数组, 二维数据还是比较常用，</p>
<p>比如定义坐标, 表示<code>4</code>个坐标<code>(1,1) (2,2) (3,3) (4,4)</code></p>
<pre><code class="language-go">// pos是一个二维数组
fmt.Println(pos)  // [[1 1] [2 2] [3 3] [4 4]]

// 修改第一点的坐标
pos[0] = [2]int{10, 10}
fmt.Println(pos)  // [[10 10] [2 2] [3 3] [4 4]]
</code></pre>
<h2 id="8-数组作为函数参数">8、数组作为函数参数</h2>
<p><code>Go</code>中的传值方式是按值传递，这意味着给变量赋值、给函数传参时，都是直接拷贝一个副本然后将副本赋值给对方的。这样的拷贝方式意味着：</p>
<ul>
<li>如果数据结构体积庞大，则要完整拷贝一个数据结构副本时效率会很低</li>
<li>函数内部修改数据结构时，只能在函数内部生效，函数一退出就失效了，因为它修改的是副本对象</li>
</ul>
<p>示例</p>
<pre><code class="language-go">func TestMain1(t *testing.T) {
	payload := [4]int{1}
	fmt.Printf(&quot;%p\n&quot;, &amp;payload)  // 0xc00014a040
	change(payload)  // 0xc00014a060
}

func change(payload [4]int) {
	fmt.Printf(&quot;%p\n&quot;, &amp;payload)
	payload[0] = 10
}
</code></pre>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://www.ssgeek.com/tag/golang" class="tag">
                    golang
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://www.ssgeek.com/post/golang-ge-shi-hua-shu-chu">
                  <h3 class="post-title">
                    Golang格式化输出
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://cdn.bootcdn.net/ajax/libs/aos/2.3.4/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '22c870a7f8551b566598',
        clientSecret: '1acfdedd403cdf39c4a6ce932a4a991bb2b32e3a',
        repo: 'hargeek.github.io',
        owner: 'hargeek',
        admin: ['hargeek'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  


  </body>
</html>
